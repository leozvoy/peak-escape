<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>峰顶逃生收益计算器</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="hero">
      <div>
        <p class="eyebrow">Peak Escape</p>
        <h1>峰顶逃生收益计算器</h1>
        <p class="subtitle">记录每一次涨跌与买卖，实时掌握总价值与盈亏。</p>
      </div>
      <div class="status-pill" id="statusPill">等待输入初始买入价值</div>
    </header>

    <section class="card" id="initialCard">
      <h2>输入初始买入价值</h2>
      <p class="muted">请输入买入的价值（无需单位），确认后即可开始添加节点。</p>
      <div class="input-row">
        <input id="initialValue" type="number" min="0" step="0.01" placeholder="例如 100" />
        <button id="confirmInitial" class="primary">确认</button>
      </div>
    </section>

    <section class="grid">
      <div class="card chart-card">
        <div class="card-header">
          <h2>走势图（占位）</h2>
          <button id="addNode" class="icon-button" title="添加节点">➕</button>
        </div>
        <div class="chart-placeholder" id="chartPlaceholder">
          <div class="chart-text">
            <p>这里将展示涨跌与买卖节点的图表。</p>
            <p class="muted">当前版本先以列表形式记录。</p>
          </div>
        </div>
      </div>

      <div class="card summary-card">
        <h2>当前总价值</h2>
        <div class="value" id="totalValue">--</div>
        <div class="summary">
          <div>
            <span class="label">总盈亏</span>
            <span id="totalProfit">--</span>
          </div>
          <div>
            <span class="label">已实现盈亏</span>
            <span id="realizedProfit">--</span>
          </div>
          <div>
            <span class="label">未实现盈亏</span>
            <span id="unrealizedProfit">--</span>
          </div>
        </div>
        <div class="holdings">
          <div>
            <span class="label">当前价格</span>
            <span id="currentPrice">--</span>
          </div>
          <div>
            <span class="label">持仓份额</span>
            <span id="currentShares">--</span>
          </div>
        </div>
      </div>
    </section>

    <section class="card" id="nodesCard">
      <h2>操作节点</h2>
      <p class="muted">每次点击 ➕ 新增一次涨跌与买卖记录。</p>
      <div id="nodesList" class="nodes-list">
        <div class="empty">暂无节点，请点击 ➕ 添加。</div>
      </div>
    </section>
  </div>

  <div class="modal" id="nodeModal" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <h3>新增节点</h3>
        <button id="closeModal" class="ghost">关闭</button>
      </div>
      <div class="modal-body">
        <label>
          涨/跌幅（%）
          <input id="changePercent" type="number" step="0.01" placeholder="例如 10 或 -5" />
        </label>
        <label>
          操作类型
          <select id="tradeType">
            <option value="sell">卖出</option>
            <option value="buy">买入</option>
          </select>
        </label>
        <label>
          买入/卖出比例（%）
          <input id="tradePercent" type="number" min="0" max="100" step="0.01" placeholder="例如 20" />
        </label>
        <p class="muted tip">比例以当前持仓份额为基准，买入将增加持仓，卖出将减少持仓。</p>
      </div>
      <div class="modal-actions">
        <button id="confirmNode" class="primary">确认节点</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
